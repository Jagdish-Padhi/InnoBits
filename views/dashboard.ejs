<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Dashboard</title>
    <link rel="stylesheet" href="/css/dashboard.css">
</head>

<body class="add-product-page">

    <%- include("partials/navbar")%>

        <div class="dashboard">
            <section class="inventory-summary">
                <h2>Inventory Overview</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Expiration Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if ( Medicines && Medicines.length> 0) { %>

                            <% Medicines.forEach((Med)=> { %>

                                <tr class="tableRow">
                                    <td>
                                        <%= Med.name %>
                                    </td>
                                    <td>
                                        <%= Med.numberOfTablets %>
                                    </td>
                                    <td>
                                        <%= Med.expiryDate %>
                                    </td>

                                    <td>
                                        <% if (Med.status=="Take Dose" ) { %>
                                            <button id="doseBtn-<%= Med._id %>" style="background-color:#f39c12;"
                                                onclick="stopAlarmAndUpdate('<%= Med._id %>')">
                                                <%= Med.status %>
                                            </button>

                                            <audio id="alarmSound-<%= Med._id %>" src="/audio/alarm.mp3"
                                                preload="auto"></audio>


                                            <% } %>

                                                <% if (Med.status=="Missed!" ) { %>
                                                    <button style="background-color: #e74c3c !important;">
                                                        <%= Med.status %>
                                                    </button>
                                                    <% } %>

                                                        <% if (Med.status=="Upcoming" ) { %>
                                                            <button style="background-color: #3498db !important;">
                                                                <%= Med.status %>
                                                            </button>
                                                            <% } %>

                                                                <script src="/js/alarm.js"></script>
                                    </td>
                                </tr>
                                <% }); %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="4">No medicines found...</td>
                                        </tr>

                                        <% } %>
                    </tbody>
                </table>
                <a href="/productList"><button>View all</button></a>

            </section>

            <section class="alerts">
                <h2>Upcoming Expiration & Low Stock Alerts</h2>
                <div class="alert low-stock">
                    <p><strong>Vitamin C</strong> is low in stock (< 5). Consider reordering.</p>
                </div>
                <div class="alert expiring-soon">
                    <p><strong>Calcium Tablets</strong> expire on 2025-02-25. Reorder soon!</p>
                </div>

                <div id="btn"><button>View All</button></div>
            </section>
            </section>

            <!-- Upcoming Expiration & Low Stock Alerts -->
            <section class="alerts">
                <h2>Dose Reminders</h2>
                <div class="alert low-stock">
                    <p><strong>Vitamin C</strong> is low in stock (< 5). Consider reordering.</p>
                </div>
                <div class="alert expiring-soon">
                    <p><strong>Calcium Tablets</strong> expire on 2025-02-25. Reorder soon!</p>
                </div>

                <div id="btn"><button>View All</button></div>
            </section>

            <section class="usage-summary">
                <h2>Recent Usage</h2>
                <ul>
                    <li>Vitamin C: 2 tablets used on 2025-02-18</li>
                    <li>Iron Supplements: 1 pill used on 2025-02-17</li>
                </ul>
                <button>Add Usage</button>
            </section>



            <footer class="footer">
                &copy; 2025 Meditory. All Rights Reserved.
            </footer>



</body>

</html>